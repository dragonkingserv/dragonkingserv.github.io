import{T as p,F as f,s as d,E as l,D as A,a as k,p as T,f as c}from"./tab-93d07e59.js";import{_ as y,a as b,o as u,c as h,d as x,b as t,t as o,F as E,i as C,j as D,v as U,g as N,n as S}from"./index-1956c30d.js";const m=[{key:1,value:"500U"},{key:2,value:"1000U"}],$={data(){return{actions:m,menu:m[0].key,value:m[0].value,poolUSDT:0,needApprove:!0,needAmount:0,canTakeAmount:0,leftTakeAmount:0,transferAddress:""}},components:{Tab:p},computed:{},methods:{menuChange(e,s){this.menu=e,this.value=s,this.init()},check(){window.location.href="https://bscscan.com/address/"+f},async pledge(){if(this.poolUSDT==0){d({message:this.$t("message.pledgePoolNoAmount")}).then(()=>{});return}if(this.needApprove){l.approval(A,k,T((this.needAmount*this.menu).toString())).then(e=>{this.needApprove=!1});return}l.pledge(this.menu).then(e=>{d({message:e.message}).then(()=>{})}).catch(e=>{console.error(e)})},take(){this.canTakeAmount!=0&&l.take().then(e=>d({message:e.message}).then(()=>{}))},transfer(){this.transferAddress!=""&&l.transfer(this.transferAddress).then(e=>d({message:e.message}).then(()=>{}))},init(){l.balanceOfPledgeAmount().then(e=>{this.poolUSDT=e}),l.pledgeCheck(this.menu).then(e=>{e==0?this.needApprove=!1:this.needApprove=!0}),l.getNeedAmount().then(e=>{this.needAmount=e}),l.getUserPledge().then(e=>{if(e&&e.createAt>0){var s=e.lastTakeAt==0?e.createAt:e.lastTakeAt,_=Math.trunc((Math.round(new Date().getTime()/1e3)-Number(s))/86400),i=c(e.orgAmount)*.01*_;i>=c(e.leftAmount)&&(i=e.leftAmount),this.leftTakeAmount=c(e.leftAmount),this.canTakeAmount=c(i)}})}},mounted(){this.init()}},F={class:"box-nft"},w={class:"content"},B={class:"background"},M={class:"boydey"},L={class:"logo"},P={class:"number"},R={class:"numberText"},V={class:"numberRight"},z={style:{color:"#ff8063"}},H={class:"menu"},K=["value","onClick"],O={class:"numberButton"},j={style:{"font-size":"12px"}},I={class:"numberText"},q=["placeholder"],G={class:"numberText"},J={style:{color:"#ff8063"}},Q={class:"numberRight"},W={style:{color:"black"}},X={style:{color:"#ff8063"}},Y={class:"foot"},Z={class:"footText"},ee=["innerHTML"];function te(e,s,_,i,r,a){const g=b("Tab");return u(),h("div",F,[x(g),t("div",w,[t("div",B,[t("div",M,[t("div",L,o(e.$t("message.textEcology_title")),1),t("div",P,[t("div",R,[t("div",null,o(e.$t("message.textEcology_left1"))+"：",1),t("div",V,[t("div",z,o(`${Number(r.poolUSDT).toFixed(2)}`),1),t("div",{class:"button",onClick:s[0]||(s[0]=n=>a.check())},o(e.$t("message.textEcology_check")),1)])]),t("div",H,[(u(!0),h(E,null,C(r.actions,(n,v)=>(u(),h("div",{key:v,value:n.value,class:S(`${this.menu===n.key?"menu1 menu2":"menu1"}`),onClick:se=>a.menuChange(n.key,n.value)},o(n.value),11,K))),128))]),t("div",O,[t("span",j," ≈ "+o(r.needAmount*this.menu)+" DragonKing",1),t("div",{class:"but_h",onClick:s[1]||(s[1]=(...n)=>a.pledge&&a.pledge(...n))},o(r.needApprove?e.$t("message.approve"):e.$t("message.textEcology_left2")),1)]),t("div",I,[D(t("input",{class:"input","onUpdate:modelValue":s[2]||(s[2]=n=>r.transferAddress=n),type:"text",placeholder:`${e.$t("message.textEcology_left4")}`},null,8,q),[[U,r.transferAddress]]),t("div",{class:"transferBut",onClick:s[3]||(s[3]=(...n)=>a.transfer&&a.transfer(...n))},o(e.$t("message.textEcology_ctransfer")),1)]),t("div",G,[t("div",null,[N(o(e.$t("message.textEcology_left3"))+"： ",1),t("span",J,o(this.leftTakeAmount)+" U",1)]),t("div",Q,[t("div",W,o(e.$t("message.textEcology_left5"))+"：",1),t("div",X,o(`${Number(this.canTakeAmount).toFixed(2)}`)+" U",1),t("div",{class:"buttonLing",onClick:s[4]||(s[4]=(...n)=>a.take&&a.take(...n))},o(e.$t("message.textEcology_down")),1)])])])])]),t("div",Y,[t("div",Z,[t("div",{innerHTML:e.$t("message.textEcology")},null,8,ee)])])])])}const ae=y($,[["render",te],["__scopeId","data-v-9d71e8fb"]]);export{ae as default};
