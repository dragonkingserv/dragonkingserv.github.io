import{T as g,s as i,E as l,D as p,F as f,p as k}from"./tab-7b466c8b.js";import{_ as b,a as A,o as c,c as u,d as y,b as s,t as o,F as T,i as x,j as C,v as D,n as E}from"./index-c91ff239.js";const m=[{key:1,value:"500U"},{key:2,value:"1000U"}],N={data(){return{actions:m,menu:m[0].key,value:m[0].value,poolUSDT:0,needApprove:!0,needAmount:0,canTakeAmount:0,transferAddress:""}},components:{Tab:g},computed:{},methods:{menuChange(e,t){this.menu=e,this.value=t},check(){window.location.href="https://bscscan.com/address/0xd6eeA64D7CB614a57383639747b5B37C74aa3894"},async pledge(){if(this.poolUSDT==0){i({message:this.$t("message.pledgePoolNoAmount")}).then(()=>{});return}this.needApprove&&await l.approval(p,f,k(this.needAmount)),l.pledge(this.menu).then(e=>{i({message:e.message}).then(()=>{})}).catch(e=>{console.error(e)})},take(){this.canTakeAmount!=0&&l.take()},transfer(){this.transferAddress!=""&&l.transfer(this.transferAddress).then(e=>i({message:e.message}).then(()=>{}))}},mounted(){l.balanceOfPledgeAmount().then(e=>{console.log("res",e),this.poolUSDT=e}),l.pledgeCheck(this.menu).then(e=>{e==0&&(this.needApprove=!1)}),l.getNeedAmount().then(e=>{this.needAmount=e}),l.getUserPledge().then(e=>{if(e){var t=e.lastTakeAt==0?e.createAt:e.lastTakeAt,h=(Math.round(new Date().getTime()/1e3)-Number(t))/(24*360),d=1e3*.1*h;d>=e.leftAmount&&(d=e.leftAmount),this.canTakeAmount=d}})}},U={class:"box-nft"},w={class:"content"},B={class:"background"},S={class:"boydey"},$={class:"logo"},F={class:"number"},M={class:"numberText"},R={class:"numberRight"},L={style:{color:"#ff8063"}},P={class:"menu"},V=["value","onClick"],z={class:"numberButton"},H={style:{"font-size":"12px"}},K={class:"numberText"},O=["placeholder"],j={class:"numberText"},I={class:"numberRight"},q={style:{color:"#ff8063"}},G={class:"foot"},J={class:"footText"},Q=["innerHTML"];function W(e,t,h,d,r,a){const _=A("Tab");return c(),u("div",U,[y(_),s("div",w,[s("div",B,[s("div",S,[s("div",$,o(e.$t("message.textEcology_title")),1),s("div",F,[s("div",M,[s("div",null,o(e.$t("message.textEcology_left1"))+"：",1),s("div",R,[s("div",L,o(`${Number(r.poolUSDT).toFixed(2)}`),1),s("div",{class:"button",onClick:t[0]||(t[0]=n=>a.check())},o(e.$t("message.textEcology_check")),1)])]),s("div",P,[(c(!0),u(T,null,x(r.actions,(n,v)=>(c(),u("div",{key:v,value:n.value,class:E(`${this.menu===n.key?"menu1 menu2":"menu1"}`),onClick:X=>a.menuChange(n.key,n.value)},o(n.value),11,V))),128))]),s("div",z,[s("span",H," ≈ "+o(r.needAmount*this.menu)+" DragonKing",1),s("div",{class:"but_h",onClick:t[1]||(t[1]=(...n)=>a.pledge&&a.pledge(...n))},o(r.needApprove?e.$t("message.approve"):e.$t("message.textEcology_left2")),1)]),s("div",K,[C(s("input",{class:"input","onUpdate:modelValue":t[2]||(t[2]=n=>r.transferAddress=n),type:"text",placeholder:`${e.$t("message.textEcology_left4")}`},null,8,O),[[D,r.transferAddress]]),s("div",{class:"transferBut",onClick:t[3]||(t[3]=(...n)=>a.transfer&&a.transfer(...n))},o(e.$t("message.textEcology_ctransfer")),1)]),s("div",j,[s("div",null,o(e.$t("message.textEcology_left3"))+"：",1),s("div",I,[s("div",q,o(`${Number(this.canTakeAmount).toFixed(2)}`),1),s("div",{class:"button",onClick:t[4]||(t[4]=(...n)=>a.take&&a.take(...n))},o(e.$t("message.textEcology_down")),1)])])])])]),s("div",G,[s("div",J,[s("div",{innerHTML:e.$t("message.textEcology")},null,8,Q)])])])])}const ee=b(N,[["render",W],["__scopeId","data-v-be1bfc97"]]);export{ee as default};
