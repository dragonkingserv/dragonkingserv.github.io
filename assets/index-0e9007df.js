import{T as g,E as a,I as h,s as d,D as p,M as T,_ as k}from"./tab-8374aac3.js";import{j as b,a as C,o as m,c as u,d as D,b as e,F as x,i as N,k as F,v as I,t as c,n as _}from"./index-c84aa723.js";import{_ as w}from"./plugin-vueexport-helper-c27b6911.js";const l=[{name:"NFD",address:"0x8546a2cada887f7579844e8f4f241fe513036289"},{name:"BKC",address:"0x0529d2760e0db2d7ff853b7cbcc5cf2706228005"},{name:"QMGF",address:"0xa8ed503516a3570ae426be4f8412450c236519c5"}],y={data(){return{test:"选项一",showPopover:!1,actions:l,tokenID:null,selected:l[0].address,count:0,menu:l[0].address,value:l[0].name,nftAmount:0}},components:{Tab:g},computed:{},async mounted(){this.count=await a.ERC721BalanceOf(h),this.nftAmount=await a.getNFTNeedAmount()},methods:{async mint(){if(!this.tokenID){d({message:"请输入NFT编号"}).then(()=>{});return}const n=await a.ownerOf(this.selected,this.tokenID.toString());if(b().address!=n){d({message:this.$t("message.nftNotOwner")}).then(()=>{});return}a.approval(p,h,T).then(s=>{a.mintNFT(this.selected,this.tokenID).then(r=>{d({message:`${r.message}`}).then(()=>{})}).catch(r=>{d({message:`${r}`}).then(()=>{})})})},async checkNFT(){if(this.tokenID!=null){var n=await a.nftCheck(this.selected,this.tokenID),s=this.$t("message.nftCheckCanTip");n.code!=200&&(s=this.$t("message.nftCheckCannotTip")),d({message:s})}},menuChange(n,s){this.menu=n,this.selected=n,this.value=s}}},A={class:"box-nft"},S={class:"content"},B={class:"background"},E={class:"boydey"},M={class:"menu"},O=["value","onClick"],R={class:"number"},$={class:"numberText"},K=["placeholder"],L={class:"dkamount"},V={class:"imgs"},H={class:"imgBreaground"},U={class:"bageText"},j={class:"foot"},z={class:"footText"},G=["innerHTML"];function P(n,s,r,Q,o,i){const f=C("Tab");return m(),u("div",A,[D(f),e("div",S,[e("div",B,[e("div",E,[e("div",M,[(m(!0),u(x,null,N(o.actions,(t,v)=>(m(),u("div",{key:v,value:t.address,class:_(`${this.menu===t.address?"menu1 menu2":"menu1"}`),onClick:q=>i.menuChange(t.address,t.name)},c(t.name),11,O))),128))]),e("div",R,[e("div",$,[F(e("input",{class:"input","onUpdate:modelValue":s[0]||(s[0]=t=>o.tokenID=t),type:"text",placeholder:`请输入${this.value}编号`},null,8,K),[[I,o.tokenID]]),e("div",{class:"btn",onClick:s[1]||(s[1]=(...t)=>i.checkNFT&&i.checkNFT(...t))},c(n.$t("message.nftCheck")),1)])]),e("div",L,"10u ≈ "+c(Number(o.nftAmount).toFixed(2))+"DK",1),e("div",{class:"but",onClick:s[2]||(s[2]=(...t)=>i.mint&&i.mint(...t))},c(n.$t("message.textCast")),1)])]),e("div",V,[e("div",H,[e("img",{class:_(this.count>0?"bage":"bage-no"),src:k,alt:""},null,2),e("div",U,"x"+c(o.count),1)])]),e("div",j,[e("div",z,[e("div",{innerHTML:n.$t("message.nftTextRule")},null,8,G)])])])])}const Y=w(y,[["render",P],["__scopeId","data-v-2bfab23e"]]);export{Y as default};
